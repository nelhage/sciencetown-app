<head>
  <title>Sciencetown</title>
</head>

<body>
  {{> adminpane }}
  {{> opendialog }}
  {{> map}}
</body>

<template name='adminpane'>
  <div id='adminpane'>
  {{#if isadmin}}
  <button id='closeadmin'>Close admin mode</button>
  {{> adminui }}
  {{else}}
  <button id='goadmin'>Open admin mode</button>
  {{/if}}
  </div>
</template>

<template name="adminui">
  {{#if viewall}}
  <button id='hideall'>Hide unopened hexes</button>
  {{else}}
  <button id='showall'>Show all hexes</button>
  {{/if}}
  <button id='reset'>Reset map</button>
</template>

<template name='opendialog'>
  {{#if show}}
    <div id="openwindow">
    <form>
      <p>
        Opening:  <span id="codeshow">{{code}}</span>
      </p>
      <p>Opened by:
        <select name="who" id="whoinput">
          {{#each characters}}
          <option value="{{charcode}}">{{name}}</option>
          {{/each}}
        </select>
      </p><p>
        <input type="submit" value="Open"   class='open'/>
        <input type="button" value="Cancel" class='cancel'/>
      </p>
    </form>
  </div>
  {{/if}}
</template>

<template name="map">
  <div id='map'>
  {{#each hexes}}
    {{> hex}}
  {{/each}}
  </div>
</template>

<template name="hex">
  <span style="left: {{left}}px; top: {{top}}px;" class="hex {{css_class}}">
    {{#if showCode }}
    <div class="code">{{code}}</div>
    <div class="opened"><div><span>{{name}}</span></div></div>
       <div class="who">{{opened.by}}</div>
       <div class="cost">{{cost}}</div>
    {{else}}
    <div class="closed">{{cost}}</div>
    {{/if}}
  </span>
</template>